<p-toast position="bottom-left"></p-toast>

<!-- create team modal -->
<p-dialog [visible]="displayCreateTeamModal" [modal]="true">
  <ng-template pTemplate="content">
    <h2 class="modal-title">New team</h2>
    <p-divider></p-divider>
    <form
        id="create-team-form"
        class="team-form h-full"
        #createTeamForm
        (submit)="createTeam($event, createTeamForm)"
    >
      <div class="h-full flex justify-content-between p-5">
        <div class="sm:col-9 col-12 h-full">
          <input
              autocomplete="false"
              class="note-edit-input note-edit-input-title"
              type="text"
              name="name"
              placeholder="Team name"
          />
          <p-divider></p-divider>
          <textarea
              autocomplete="false"
              class="note-edit-input note-edit-input-content w-full"
              name="description"
              placeholder="Team description"
          ></textarea>
        </div>
        <p-divider layout="vertical"></p-divider>
        <div class="sm:col-3 col-12">
          <div class="flex flex-column w-full">
            <h3>Add users to your team</h3>
            <p-multiSelect
                [options]="friends"
                [(ngModel)]="selectedUsers"
                [ngModelOptions]="{standalone: true}"
                defaultLabel="Select users"
                optionLabel="username"
                display="chip"
                styleClass="w-full"
            ></p-multiSelect>
          </div>
        </div>
      </div>
    </form>
  </ng-template>
  <ng-template pTemplate="footer">
    <p-divider></p-divider>
    <div class="button-pair justify-content-end">
      <div>
        <button
            pButton
            pRipple
            class="p-button p-button-danger p-button-outlined"
            type="button"
            (click)="hideCreateTeamModal()"
            label="Cancel"
        ></button>
        <button
            pButton
            pRipple
            class="p-button p-button-success p-button-outlined"
            type="submit"
            form="create-team-form"
            label="Create team"
        ></button>
      </div>
    </div>
  </ng-template>
</p-dialog>

<!-- team management modal -->
<p-dialog [visible]="displayManageTeamModal" [modal]="true">
  <ng-template pTemplate="content">
    <h2 class="modal-title">{{ selectedTeamName }}</h2>
    <p-divider></p-divider>
    <div class="flex md:flex-row flex-column h-full w-full">
      <div class="flex md:flex-column flex-row gap-1 md:col-2 col-12">
        <p-button
            icon="pi pi-pencil"
            styleClass="p-button-text w-full"
            label="Team details"
            (onClick)="setDisplayItem(0)"
        ></p-button>
        <p-button
            icon="pi pi-users"
            styleClass="p-button-text w-full"
            label="Team members"
            (onClick)="setDisplayItem(1)"
        ></p-button>
        <p-button
            icon="pi pi-trash"
            styleClass="p-button-text w-full"
            label="Delete team"
            (onClick)="setDisplayItem(2)"
        ></p-button>
      </div>
      <p-divider layout="vertical" styleClass="hidden md:inline-block"></p-divider>
      <!-- display 0 -->
      <div *ngIf="displayItem === 0" class="team-details w-full">
        <form
            #changeDetailsForm
            (submit)="updateTeamDetails($event, changeDetailsForm)"
        >
          <input
              id="manage-team-name"
              autocomplete="false"
              class="note-edit-input note-edit-input-title"
              type="text"
              name="name"
              value="{{ selectedTeamName }}"
              placeholder="Team Name"
          />
          <p-divider></p-divider>
          <textarea
              id="manage-team-description"
              autocomplete="false"
              class="note-edit-input note-edit-input-content w-full"
              name="description"
              value="{{selectedTeamDescription}}"
              placeholder="Team Description"
          ></textarea>
          <p-divider></p-divider>
          <div class="flex flex-row gap-2">
            <p-button label="Reset" styleClass="p-button-outlined p-button-danger"
                      (click)="resetTeamDetailForm()"></p-button>
            <p-button label="Save" styleClass="bg-green-400" type="submit"></p-button>
          </div>
        </form>
      </div>
      <!-- display 1 -->
      <div *ngIf="displayItem === 1" class="team-details w-full">
        <form #changeDetailsForm (submit)="updateTeamDetails($event, changeDetailsForm)">
          <input
              autocomplete="false"
              class="note-edit-input note-edit-input-title"
              type="text"
              name="name"
              value="nu stiu"
              placeholder="Team Name"
          />
          <p-divider></p-divider>
          <textarea
              autocomplete="false"
              class="note-edit-input note-edit-input-content w-full"
              name="description"
              value="{{selectedTeamDescription}}"
              placeholder="Team Description"
          ></textarea>
        </form>
      </div>
      <!-- display 2 -->
      <div *ngIf="displayItem === 2" class="team-details w-full">
        <form #deleteTeamForm (submit)="deleteTeam($event, deleteTeamForm)">
          <p class="text-lg font-semibold">If you are sure you want to delete the team, type the team name and your password below and
            press 'Delete'.</p>
          <p class="text-red-500">*deleting a team deletes all notes associated with the team and no data can be
            recovered.</p>
          <div class="flex flex-column">
            <input
                autocomplete="false"
                class="note-edit-input note-edit-input-content"
                type="text"
                name="name"
                placeholder="Team Name"
            />
            <p-divider></p-divider>
            <input
                autocomplete="false"
                class="note-edit-input note-edit-input-content"
                type="password"
                name="password"
                placeholder="Password"
            />
          </div>
          <p-divider></p-divider>
          <p-button label="Delete" type="submit" styleClass="bg-red-500"></p-button>
        </form>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <p-divider></p-divider>
    <div class="button-pair justify-content-end">
      <div>
        <button
            pButton
            pRipple
            class="p-button p-button-danger p-button-outlined"
            type="button"
            (click)="hideManageTeamModal()"
            label="Exit"
        ></button>
      </div>
    </div>
  </ng-template>
</p-dialog>